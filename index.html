<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="蔡涵镛" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta property="og:type" content="website">
<meta property="og:title" content="蔡涵镛">
<meta property="og:url" content="http://caihanyong.me/index.html">
<meta property="og:site_name" content="蔡涵镛">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="蔡涵镛">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"always","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://caihanyong.me/"/>





  <title>蔡涵镛</title>
  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-101241731-1', 'auto');
  ga('send', 'pageview');
</script>











</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">蔡涵镛</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">不写代码的科学家不是一个好律师</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://caihanyong.me/2017/07/12/weixin-pay/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="caihanyong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蔡涵镛">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/07/12/weixin-pay/" itemprop="url">微信支付中遇到过哪些坑？</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-12T00:00:00+08:00">
                2017-07-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="微信内"><a href="#微信内" class="headerlink" title="微信内"></a>微信内</h2><h3 id="基于jssdk的调用"><a href="#基于jssdk的调用" class="headerlink" title="基于jssdk的调用"></a>基于jssdk的调用</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">// 需要引入SDK</div><div class="line">wx.chooseWXPay(&#123;</div><div class="line">    timestamp: 0, // 支付签名时间戳，注意微信jssdk中的所有使用timestamp字段均为小写。但最新版的支付后台生成签名使用的timeStamp字段名需大写其中的S字符</div><div class="line">    nonceStr: &apos;&apos;, // 支付签名随机串，不长于 32 位</div><div class="line">    package: &apos;&apos;, // 统一支付接口返回的prepay_id参数值，提交格式如：prepay_id=***）</div><div class="line">    signType: &apos;&apos;, // 签名方式，默认为&apos;SHA1&apos;，使用新版支付需传入&apos;MD5&apos;</div><div class="line">    paySign: &apos;&apos;, // 支付签名</div><div class="line">    success: function (res) &#123;</div><div class="line">        // 支付成功后的回调函数</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="基于getBrandWCPayRequest的方式"><a href="#基于getBrandWCPayRequest的方式" class="headerlink" title="基于getBrandWCPayRequest的方式"></a>基于getBrandWCPayRequest的方式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">// 不需要引入SDK</div><div class="line">const wxPay = (data, resolve, reject) =&gt; &#123;</div><div class="line">  function onBridgeReady () &#123;</div><div class="line">    window.WeixinJSBridge.invoke(</div><div class="line">      &apos;getBrandWCPayRequest&apos;, data.payInfo,</div><div class="line">      function (res) &#123;</div><div class="line">        if (res.err_msg === &apos;get_brand_wcpay_request:ok&apos;) &#123;</div><div class="line">          resolve(&#123;res, data&#125;)</div><div class="line">          return</div><div class="line">        &#125;</div><div class="line">        if (res.err_msg === &apos;get_brand_wcpay_request:cancel&apos; || res.err_msg === &apos;get_brand_wcpay_request:fail&apos;) &#123;</div><div class="line">          reject(&#123;res, data&#125;)</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    )</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  // 如果是微信支付</div><div class="line">  if (typeof window.WeixinJSBridge === &apos;undefined&apos;) &#123;</div><div class="line">    if (document.addEventListener) &#123;</div><div class="line">      document.addEventListener(&apos;WeixinJSBridgeReady&apos;, onBridgeReady, false)</div><div class="line">    &#125; else if (document.attachEvent) &#123;</div><div class="line">      document.attachEvent(&apos;WeixinJSBridgeReady&apos;, onBridgeReady)</div><div class="line">      document.attachEvent(&apos;onWeixinJSBridgeReady&apos;, onBridgeReady)</div><div class="line">    &#125;</div><div class="line">  &#125; else &#123;</div><div class="line">    onBridgeReady()</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">export default data =&gt; &#123;</div><div class="line">  return new Promise((resolve, reject) =&gt; &#123;</div><div class="line">    wxPay(data, resolve, reject)</div><div class="line">  &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>公众号后台添加支付目录<br>目录以<code>/</code>结尾，微信支付会以最后一个<code>／</code>为当前目录调起支付<br>如果配置的域名为：www.abc.com/<br>则只能在 www.abc.com/aa，www.abc.com/bb, …下进行支付<br>而不能在www.abc.com/aa/下支付</li>
<li>添加业务域名（否则会弹出，防欺骗盗号，请勿输入密码）</li>
</ul>
<h2 id="微信外"><a href="#微信外" class="headerlink" title="微信外"></a>微信外</h2><h3 id="网络环境未能通过安全验证，请稍后再试"><a href="#网络环境未能通过安全验证，请稍后再试" class="headerlink" title="网络环境未能通过安全验证，请稍后再试"></a>网络环境未能通过安全验证，请稍后再试</h3><blockquote>
<p>商户侧统一下单传的终端IP(spbill_create_ip)与用户实际调起支付时微信侧检测到的终端IP不一致导致的</p>
</blockquote>
<ul>
<li>造成此问题的原因：<br>1、绑定host引起<br>2、来回切换线上和测试环境，以及本地环境导致的</li>
<li>解决办法：<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"># nginx 配置</div><div class="line">proxy_set_header Host $host;</div><div class="line">proxy_set_header X-Real-IP $remote_addr;</div><div class="line">proxy_set_header X-Real-Port $remote_port;</div><div class="line">proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="商家参数格式有误，请联系商家解决"><a href="#商家参数格式有误，请联系商家解决" class="headerlink" title="商家参数格式有误，请联系商家解决"></a>商家参数格式有误，请联系商家解决</h3><blockquote>
<p>调起H5支付的referer为空或者和支付域名不一致导致的</p>
<ul>
<li>造成此问题的原因：<br>1、直接访问本地服务调支付，缺少referer<br>2、绑定的服务域名和支付域名不一致</li>
</ul>
</blockquote>
<ul>
<li>解决办法：<br>将服务通过反向代理到支付域名，设置支付目录到域名</li>
</ul>
<h3 id="商家存在未配置的参数，请联系商家解决"><a href="#商家存在未配置的参数，请联系商家解决" class="headerlink" title="商家存在未配置的参数，请联系商家解决"></a>商家存在未配置的参数，请联系商家解决</h3><blockquote>
<p>1、当前调起H5支付的域名（微信侧从referer中获取）与申请H5支付时提交的授权域名不一致，如需添加或修改授权域名，请联系我们的商务同事操作<br>  2、如果设置了回跳地址redirect_url，请确认设置的回跳地址的域名与申请H5支付时提交的授权域名是否一致</p>
</blockquote>
<ul>
<li>造成此问题的原因：<br>1、redirect_url的referer，也就是上一个问题说到的，需要与支付域名保持一致的referer<br>2、redirect_url的encode，只能encode一次，如果产生两次仍会报错此问题<br>3、redirect_url的参数如果是连接，如果在支付回调地址中带有url类参数，不能有具体的链接信息<br>4、联系微信商务，配置mweb(h5支付域名)</li>
<li>解决办法：<br>1、referer在支付内保持一致<br>2、由于有些浏览器自动encode，无论redirect_url中是否encode，都先decode之后再进行encode传递给微信支付<br>3、拦截地址参数中存在的<code>/</code>，在服务中进行转换</li>
</ul>
<h3 id="h5无法确定支付状态"><a href="#h5无法确定支付状态" class="headerlink" title="h5无法确定支付状态"></a>h5无法确定支付状态</h3><ul>
<li>用户点击“取消支付“或支付完成后点“完成”按钮。因为无法保证页面回跳时，支付流程已结束</li>
<li>用户在调起h5支付后，触发一个自定义回调，让用户在回到此页面时，手动触发获取支付状态，进而判断成功与否</li>
</ul>
<h3 id="未解决的问题"><a href="#未解决的问题" class="headerlink" title="未解决的问题"></a>未解决的问题</h3><ul>
<li>如果用户手机中装有两个浏览器，支付成功或取消支付后，微信会自动调起默认浏览器，但用户可能是从第三方浏览器中发起支付<br>这样造成的问题，无法触发上一个问题的自定义回调</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://caihanyong.me/2017/07/03/docker-logs/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="caihanyong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蔡涵镛">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/07/03/docker-logs/" itemprop="url">从敲下docker logs开始理解docker日志原理</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-03T00:00:00+08:00">
                2017-07-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="参数说明"><a href="#参数说明" class="headerlink" title="参数说明"></a>参数说明</h2><figure class="highlight docker"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$ docker logs [OPTIONS] CONTAINER</div><div class="line">  Options:</div><div class="line">        --details        显示更多的信息</div><div class="line">    -f, --follow         跟踪日志输出，最后一行为当前时间戳的日志</div><div class="line">        --since string   显示自具体某个时间或时间段的日志</div><div class="line">        --tail string    从日志末尾显示多少行日志， 默认是all</div><div class="line">    -t, --timestamps     显示时间戳</div></pre></td></tr></table></figure>
<h2 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h2><figure class="highlight docker"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ docker logs <span class="number">26</span>b12d17fefc</div><div class="line">  nohup: appending output to <span class="string">'nohup.out'</span></div><div class="line">  nohup: appending output to <span class="string">'nohup.out'</span></div></pre></td></tr></table></figure>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ docker logs -t <span class="number">26</span>b12d17fefc</div><div class="line">  <span class="number">2017</span>-<span class="number">07</span>-<span class="number">03</span>T12:<span class="number">12</span>:<span class="number">29.909710295</span>Z nohup: appending output to <span class="string">'nohup.out'</span></div><div class="line">  <span class="number">2017</span>-<span class="number">07</span>-<span class="number">03</span>T13:<span class="number">58</span>:<span class="number">54.232003809</span>Z nohup: appending output to <span class="string">'nohup.out'</span></div></pre></td></tr></table></figure>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ docker logs --tail <span class="number">1</span> <span class="number">26</span>b12d17fefc</div><div class="line">  nohup: appending output to <span class="string">'nohup.out'</span></div></pre></td></tr></table></figure>
<figure class="highlight docker"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ docker logs -t --tail <span class="number">1</span> <span class="number">26</span>b12d17fefc</div><div class="line">  <span class="number">2017</span>-<span class="number">07</span>-<span class="number">03</span>T13:<span class="number">58</span>:<span class="number">54.232003809</span>Z nohup: appending output to <span class="string">'nohup.out'</span></div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$ docker logs --since 30m 26b12d17fefc</div><div class="line">  nohup: appending output to &apos;nohup.out&apos;</div><div class="line">$ docker logs -t --since=&quot;2017-07-03T13:58:54.232003809Z&quot; 26b12d17fefc</div><div class="line">  2017-07-03T13:58:54.232003809Z nohup: appending output to &apos;nohup.out&apos;</div><div class="line">$ docker logs -t --since=&quot;2017-07-03T12:12:29.909710295Z&quot; 26b12d17fefc</div><div class="line">  2017-07-03T12:12:29.909710295Z nohup: appending output to &apos;nohup.out&apos;</div><div class="line">  2017-07-03T13:58:54.232003809Z nohup: appending output to &apos;nohup.out&apos;</div></pre></td></tr></table></figure>
<h2 id="容器日志的输出形式"><a href="#容器日志的输出形式" class="headerlink" title="容器日志的输出形式"></a>容器日志的输出形式</h2><ul>
<li>stdout 标准输出</li>
<li>stderr 标准错误</li>
<li>以json格式存放在容器对于到日志文件中</li>
</ul>
<h2 id="docker日志内容类型"><a href="#docker日志内容类型" class="headerlink" title="docker日志内容类型"></a>docker日志内容类型</h2><ul>
<li>docker自身运行时Daemon的日志内容</li>
<li>docker容器的日志内容</li>
</ul>
<h2 id="docker-logs的实现原理"><a href="#docker-logs的实现原理" class="headerlink" title="docker logs的实现原理"></a>docker logs的实现原理</h2><blockquote>
<p>“Docker Daemon是Docker架构中一个常驻在后台的系统进程，它在后台启动了一个Server，Server负责接受Docker Client发送的请求；接受请求后，Server通过路由与分发调度，找到相应的Handler来执行请求。–《Docker源码分析》”</p>
</blockquote>
<p>当我们输入docker logs的时候会转化为Docker Client向Docker Daemon发起请求,Docker Daemon 在运行容器时会去创建一个协程(goroutine)，绑定了整个容器内所有进程的标准输出文件描述符。因此容器内应用的所有只要是标准输出日志，都会被 goroutine 接收，Docker Daemon会根据容器id和日志类型读取日志内容，最终会输出到用户终端上并且通过json格式存放在/var/lib/docker/containers目录下。</p>
<h2 id="容器日志文件的生命周期"><a href="#容器日志文件的生命周期" class="headerlink" title="容器日志文件的生命周期"></a>容器日志文件的生命周期</h2><p>docker logs是跟随容器而产生的，如果删除了某个容器，相应的日志文件也会随着被删除</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://caihanyong.me/2015/04/23/react-start/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="caihanyong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蔡涵镛">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/04/23/react-start/" itemprop="url">ReactJS入门知识</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2015-04-23T00:00:00+08:00">
                2015-04-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="引入"><a href="#引入" class="headerlink" title="引入"></a>引入</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;script src=<span class="string">"react.js"</span>&gt;&lt;/script&gt;</div><div class="line">&lt;script src=<span class="string">"JSXTransformer.js"</span>&gt;&lt;/script&gt;</div><div class="line">&lt;div id=<span class="string">"example"</span>&gt;&lt;/div&gt;</div></pre></td></tr></table></figure>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;script type=<span class="string">"text/jsx"</span>&gt;</div><div class="line">    React.render(</div><div class="line">    &lt;h1&gt;Hello,world!&lt;/h1&gt;,</div><div class="line">    <span class="built_in">document</span>.getElementById(<span class="string">'example'</span>));</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<p>上边的JSXTransformer.js文件之所以引入，是为了转换type=”text/jsx”文件为javascript代码的。<br>如果你已经jsx了上边所需要的功能代码，就可以不引入JSXTransformer.js文件。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;script type=<span class="string">"text/jsx"</span>&gt;</div><div class="line"><span class="comment">// 写到另外的js文件中并jsx --watch之后，引入的时候不能这样引入：</span></div></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;script type=<span class="string">"text/jsx"</span> src=<span class="string">"*.js"</span>&gt;&lt;/script&gt;</div></pre></td></tr></table></figure>
<p>因为此js文件已经是javascript代码了，就不需要type=”text/jsx”语句去格式化了。</p>
<p>也并不能 类似的用法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;script src=<span class="string">"build/JSXTransformer.js"</span>&gt;&lt;/script&gt;</div><div class="line">&lt;script type=<span class="string">"text/jsx"</span> src=<span class="string">"src/helloworld.js"</span>&gt;&lt;/script&gt;</div></pre></td></tr></table></figure>
<p>JSXTransformer.js解析的必须是页面内的 type=”text/jsx”代码</p>
<h2 id="组件传递："><a href="#组件传递：" class="headerlink" title="组件传递："></a>组件传递：</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Box=React.createClass(&#123;</div><div class="line">    <span class="attr">render</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      <span class="keyword">return</span> (</div><div class="line">         &lt;div className="Box"&gt;</div><div class="line">         &lt;h1&gt;评论：&lt;/h1&gt;</div><div class="line">            &lt;BoxList /&gt;</div><div class="line">         &lt;/div&gt;</div><div class="line">      );</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="keyword">var</span> BoxList=React.createClass(&#123;</div><div class="line">    <span class="attr">render</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      <span class="keyword">return</span> (</div><div class="line">        &lt;div className="BoxList"&gt;</div><div class="line">          &lt;Comment author="Pete Hunt"&gt;This is one comment&lt;/Comment&gt;</div><div class="line">          &lt;Comment author="Jordan Walke"&gt;This is *another* comment&lt;/Comment&gt;</div><div class="line">        &lt;/div&gt;</div><div class="line">      );</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="keyword">var</span> Comment=React.createClass(&#123;</div><div class="line">    <span class="attr">render</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      <span class="keyword">return</span>(</div><div class="line">        &lt;div className="comment"&gt;</div><div class="line">          &lt;h2 className="commentAuthor"&gt;</div><div class="line">            &#123;this.props.author&#125;</div><div class="line">          &lt;/h2&gt;</div><div class="line">          &#123;this.props.children&#125;</div><div class="line">        &lt;/div&gt;</div><div class="line">      )</div><div class="line">    &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h2 id="名词解释："><a href="#名词解释：" class="headerlink" title="名词解释："></a>名词解释：</h2><p>访问组件的属性：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">this.props</div><div class="line">//是自下而上的，由里到外的</div></pre></td></tr></table></figure></p>
<p>以上边的例子：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123;<span class="keyword">this</span>.props.author&#125;</div></pre></td></tr></table></figure></p>
<p>将在本层显示出上一层的author属性<br>任何内嵌的元素作为<br>  this.props.children</p>
<h2 id="注意："><a href="#注意：" class="headerlink" title="注意："></a>注意：</h2><p>var定义的组件名称首字母，必须大写，例如：Box<br>除了要渲染为DOM的var变量用&lt;/&gt;之外，输出内容用{}<br>var 定义变量必须在作用域以内<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">render:function()&#123;</div><div class="line">    var a=...</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://caihanyong.me/2014/11/09/git-common-commands/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="caihanyong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="蔡涵镛">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/11/09/git-common-commands/" itemprop="url">常用的git命令</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2014-11-09T00:00:00+08:00">
                2014-11-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="常见命令"><a href="#常见命令" class="headerlink" title="常见命令"></a>常见命令</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div></pre></td><td class="code"><pre><div class="line">git status</div><div class="line">// 查看状态</div><div class="line"></div><div class="line">git commit</div><div class="line">// 可提交状态（本地保存）</div><div class="line"></div><div class="line">git commit -a</div><div class="line">// 提交全部，把所有的changes变为commit</div><div class="line"></div><div class="line">git commit -a -m&quot;这里填写你修改的提示语句&quot;</div><div class="line">// 这个命令可以跳过commit -a 之后的弹出编辑提示语句的编辑器</div><div class="line"></div><div class="line">gitk</div><div class="line">// 图形化形式</div><div class="line"></div><div class="line">git add D:</div><div class="line">// 添加某一个文件</div><div class="line"></div><div class="line">git add -A</div><div class="line">// 如果本地存在多份新添加的文件，就使用这个，不用一个一个add</div><div class="line"></div><div class="line">git commit -a --amend</div><div class="line">// 把本次的commit追加到上次的commit</div><div class="line"></div><div class="line">git checkout -b issue88</div><div class="line">// 创建并切换到issue88分支</div><div class="line"></div><div class="line">git branch</div><div class="line">// 查看本地分支</div><div class="line"></div><div class="line">git branch -a</div><div class="line">// 查看所有分支 </div><div class="line"></div><div class="line">git checkout master</div><div class="line">// 切换到master分支 </div><div class="line"></div><div class="line">git fetch origin issue88</div><div class="line">// 从服务器端下载最新的文件</div><div class="line"></div><div class="line">git rebase issue88</div><div class="line">// 把最新的文件合并到本地的issue88</div><div class="line"></div><div class="line">git push origin issue88</div><div class="line">// 把本地的issue88的commit上传到服务器端</div><div class="line">git pull origin master</div><div class="line">// 从服务器端下载master最新文件到本地</div><div class="line"></div><div class="line">git diff</div><div class="line">// 比较当前文件和暂存区文件不同情况</div><div class="line"></div><div class="line">git merge &lt;branch&gt;</div><div class="line">// 将branch分支合并到当前目录所在分支</div><div class="line"></div><div class="line">git clone</div><div class="line">// 从服务端下载整个库到本地</div><div class="line"></div><div class="line">git help &lt;command&gt;</div><div class="line">// 显示command的帮助</div><div class="line"></div><div class="line">分支问题：</div><div class="line">git branch</div><div class="line">// 查看本地分支</div><div class="line"></div><div class="line">git branch -r</div><div class="line">// 查看远程分支</div><div class="line"></div><div class="line">git push origin :branch</div><div class="line">// 删除远程分支</div><div class="line"></div><div class="line">git branch -d branch</div><div class="line">//删除本地分支</div><div class="line"></div><div class="line">git checkout -- routes.js</div><div class="line">// 使用git checkout可以丢弃掉本地的改动，然后使用git pull去拿server上的最新更新。</div><div class="line">比如，我想丢弃一个文件的所有改动, 然后再使用git pull，就可以拿到server上的版本的代码了。</div><div class="line"></div><div class="line">git reset HEAD^</div><div class="line">// 回退到上一次的commit</div><div class="line"></div><div class="line">git reset --hard HEAD</div><div class="line">// 回退到本次pull之前，(撤销本次pull)</div><div class="line"></div><div class="line">git reset --mixed</div><div class="line">// 在一个分支上修改文件，然后线上已经更新了，使用git stash将修改的文件保存到缓存区，在checkout到master去pull了一次，然后就忘记了切换到之前分支上git stash pop，在master上就git stash pop了，结果冲突了。在切换的时候出现needs merge的错误，然后谷歌了一下。。。</div><div class="line">本地修改了东西git stash的时候出现 needs merge的情况，pull不了，stash不了，解决办法使用</div><div class="line">git marge再revert，撤销revert的方法</div><div class="line"></div><div class="line">git revert HEAD</div><div class="line">// 撤销前一次 commit</div><div class="line"></div><div class="line">git revert HEAD^</div><div class="line">// 撤销前前一次 commit</div><div class="line"></div><div class="line">git revert commit</div><div class="line">//（比如：fa042ce57ebbe5bb9c8db709f719cec2c58ee7ff）撤销指定的版本，撤销也会作为一次提交进行保存。</div><div class="line">然后git status查看状态，就解除冲突了，不会影响到之前的任何更改</div><div class="line"></div><div class="line">git reset --hard origin/master</div><div class="line">// 删除全部本地的修改</div><div class="line"></div><div class="line">git remote prune origin</div><div class="line">// 同步远程分支到本地</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpg"
               alt="caihanyong" />
          <p class="site-author-name" itemprop="name">caihanyong</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">4</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          
            
            
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">5</span>
                <span class="site-state-item-name">标签</span>
              
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/chanyying" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="mailto:caihanyong@foxmail.com" target="_blank" title="Email">
                  
                    <i class="fa fa-fw fa-envelope"></i>
                  
                  Email
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">caihanyong</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.1"></script>



  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  
    
    <script>
      var cloudTieConfig = {
        url: document.location.href, 
        sourceId: "",
        productKey: "a076bed82dc6455bb6169b260c439d04",
        target: "cloud-tie-wrapper"
      };
    </script>
    <script src="https://img1.ws.126.net/f2e/tie/yun/sdk/loader.js"></script>
  










  





  

  

  

  

  

  

</body>
</html>
